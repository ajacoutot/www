<!doctype html>
<html lang=en id=faq>

<title>Following -current and using snapshots</title>
<meta charset=utf-8>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/faq/current.html">

<h2 id=OpenBSD>
<a href="../index.html">
<i>Open</i><b>BSD</b></a>
Following -current and using snapshots
<small>
<a href="index.html">[FAQ Index]</a>
</small>
</h2>
<hr>

<p>
Active OpenBSD development is known as the
<a href="faq5.html#Flavors">-current</a> branch.
These sources are frequently compiled into releases known as <i>snapshots</i>.

<p>
Aggressive changes are sometimes pushed in this branch, and complications can
arise when building the latest code or upgrading from a previous point in time.
Some of the steps for getting over these hurdles are explained on this page.
Make sure you've read and understand how to
<a href="faq5.html">build the system from source</a> before using -current
and the instructions below.

<p>
In general, it's far easier to use snapshots, as developers will have gone
through much of the trouble for you already.

<p>
You should <b>always</b> use a snapshot as the starting point for running
-current.
This process typically consists of running
<a href="https://man.openbsd.org/sysupgrade">sysupgrade(8)</a> with the
<code>-s</code> flag.
Alternatively, download (and verify) the appropriate
<a href="faq4.html#bsd.rd">bsd.rd</a> file from the <code>/snapshots/</code>
directory of your preferred <a href="../ftp.html">mirror</a>, boot from it,
and choose <code>(U)pgrade</code> at the prompt.
Any installed packages should then be
<a href="faq15.html#PkgUpdate">upgraded</a> after booting into the new system.

<p>
Upgrading to -current by compiling your own source code is discouraged
for everyone except for experts, as difficult build-time crossing-points
can occur often, and no assistance will be provided.  In case of failure,
use a snapshot to recover.

<p>
Most of these changes will have to be performed as root.


<h3 id="r20210526">2021/05/26 - [packages] FreeRADIUS 3.0.22: no more LEAP</h3>

FreeRADIUS removed LEAP in 3.0.22. This was previously in the default
configuration, so if you have enabled EAP you are likely to need
to update /etc/raddb/mods-available/eap and remove the "leap { ... }"
lines.


<h3 id="r20210620">2021/06/20 (and later) - SNMP security changes</h3>

Default security settings in <a href="https://man.openbsd.org/snmpd">snmpd(8)</a>
and <a href="https://man.openbsd.org/snmp">snmp(1)</a> have been tightened.<p>

For <a href="https://man.openbsd.org/snmpd">snmpd(8)</a>:

<ul>
<li>
The default protocol has changed to SNMPv3.

<li>
The default communities "public" and "private" have been removed.
Communities must now be set explicitly.

<li>
<code>seclevel</code> default changed from <code>none</code> to <code>enc</code>.

<li>
The default SNMPv3 encryption has changed to AES.

<li>
The protocol version for <code>trap receiver</code> (for sending traps
to another host) no longer defaults to SNMPv2.
</ul>

To configure SNMPv3, you will need to add one or more users to
the configuration, e.g.:

<blockquote><pre>
    <b>user "manager" authkey "XblueQ300ZyAbUIbndmWjfl" auth hmac-sha1 enc aes enckey "tVadj9jxq8rdJ"</b>
</pre></blockquote>

If you need to reinstate SNMPv1/v2c, you can add something like this:

<blockquote><pre>
    <b>listen on any snmpv1 snmpv2 read</b>
    <b>read-only community U9PeBY1694bcxMnm</b>
    <b>seclevel none</b>
</pre></blockquote>

The community name should not be common or easily brute-forced,
especially if exposed to the internet.
<p>

For the <a href="https://man.openbsd.org/snmp">snmp(1)</a> client:

<ul>
<li>
The default protocol version has changed from <code>-v2c</code> to <code>-v3</code>.

<li>
The default encryption has changed to AES, and authentication to SHA1.

<li>
The default community ("public") has been removed.
</ul>


<h3 id="r20210915">2021/09/15 libdmx removed</h3>

The dmx library was removed. To fully remove it from your system :
<blocquote><pre>
    rm -f /usr/X11R6/lib/libdmx.*
    rm -f /usr/X11R6/include/X11/extensions/dmxext.h
    rm -f /usr/X11R6/lib/pkgconfig/dmx.pc
    rm -f /usr/X11R6/man/man3/DMX*.3
</pre></blockquote>

<!--
     Two blank lines before new sections.
     New sentences start on new lines.
     Try to make lines shorter than 80 characters.
-->

<hr id="end">
<small>$OpenBSD: current.html,v 1.1077 2021/09/15 05:49:43 matthieu Exp $</small>
