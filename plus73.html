<!doctype html>
<html lang=en id=plus>
<meta charset=utf-8>
<title>OpenBSD 7.3 Changelog</title>
<meta name="description" content="OpenBSD -current changes">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/plus73.html">
<style>
strong {
	color: var(--red);
	font-weight: normal;
}

h3 {
	color: var(--blue);
}
</style>

<h2 id=OpenBSD>
<a href="index.html">
<i>Open</i><b>BSD</b></a>
7.3 Changelog
</h2>
<hr>

<p>
This selection is intended to include all important
and all user-visible changes.
For a complete record of all changes, please see the "source-changes"
mailing list, called "OpenBSD CVS"
in the <a href="https://marc.info/?l=openbsd-cvs">archives</a>,
or use <a href="anoncvs.html#CVS">CVS</a>.

<p>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>,
<a href="plus52.html">5.2</a>,
<a href="plus53.html">5.3</a>,
<br>
<a href="plus54.html">5.4</a>,
<a href="plus55.html">5.5</a>,
<a href="plus56.html">5.6</a>,
<a href="plus57.html">5.7</a>,
<a href="plus58.html">5.8</a>,
<a href="plus59.html">5.9</a>,
<a href="plus60.html">6.0</a>,
<a href="plus61.html">6.1</a>,
<a href="plus62.html">6.2</a>,
<a href="plus63.html">6.3</a>,
<a href="plus64.html">6.4</a>,
<a href="plus65.html">6.5</a>,
<a href="plus66.html">6.6</a>,
<a href="plus67.html">6.7</a>,
<a href="plus68.html">6.8</a>,
<a href="plus69.html">6.9</a>,
<a href="plus70.html">7.0</a>,
<br>
<a href="plus71.html">7.1</a>,
<a href="plus72.html">7.2</a>,
<a href="plus.html">-current</a>.
<br>

<p>
<h3>Changes made between OpenBSD 7.2 and 7.3</h3>
<p>

<ul>
<!-- 2022/11/30 -->
<!-- 2022/11/29 -->
<!-- 2022/11/28 -->
<!-- 2022/11/27 -->
<!-- 2022/11/26 -->
<!-- 2022/11/25 -->
<!-- 2022/11/24 -->
<!-- 2022/11/23 -->
<!-- 2022/11/22 -->
<!-- 2022/11/21 -->
<!-- 2022/11/20 -->
<!-- 2022/11/19 -->
<!-- 2022/11/18 -->
<!-- 2022/11/17 -->
<!-- 2022/11/16 -->
<!-- 2022/11/15 -->
<!-- 2022/11/14 -->
<!-- 2022/11/13 -->
<!-- 2022/11/12 -->
<!-- 2022/11/11 -->
<!-- 2022/11/10 -->
<!-- 2022/11/09 -->
<!-- 2022/11/08 -->
<!-- 2022/11/07 -->
<!-- 2022/11/06 -->
<!-- 2022/11/05 -->
<!-- 2022/11/04 -->
<!-- 2022/11/03 -->
<li>Changed riscv64 pmap to flush writes before remote sfence.vma to prevent some crashes on Unmatched machines.
<li>Fixed a <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> crash when there are no window buffers.
<li>Added a -l flag to <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> display-message to disable format expansion.
<!-- 2022/11/02 -->
<li>Implemented RFC 9323 (A Profile for RPKI Signed Checkists) support in <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a>.
<li>Changed <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> to only set the extended flag when searching, which allows send-keys to work.
<!-- 2022/11/01 -->
<li>Added modified tab key sequences to <a href="https://man.openbsd.org/tmux.1">tmux(1)</a>.
<!-- 2022/10/31 -->
<li>Updated <a href="https://man.openbsd.org/vmm.4">vmm(4)</a> to allow guests to read MSR_HWCR and MSR_PSTATEDEF, which is necessary to determine the TSC frequency on AMD families 17h and 19h.
<li>Updated timezone information to 2022fgtz.
<li>Removed unfinished user accounting from <a href="https://man.openbsd.org/vmd.8">vmd(8)</a>.
<!-- 2022/10/30 -->
<li>Stopped attaching to the multiport USB controller on Lenovo X13s machines since it leads to hard resets.
<!-- 2022/10/29 -->
<!-- 2022/10/28 -->
<!-- 2022/10/27 -->
<li>Improved <a href="https://man.openbsd.org/ssh-keyscan.1">ssh-keyscan(1)</a> to accept CIDR address ranges for targets to scan.
<li>Updated libexpat to 2.5.0.
<!-- 2022/10/26 -->
<li>Limited display of wireguard peers by <a href="https://man.openbsd.org/ifconfig.8">ifconfig(8)</a> to when either a wireguard interface is specified or the flag "-A" is used.
<!-- 2022/10/25 -->
<li>Implemented the <a href="https://man.openbsd.org/waitid.2">waitid(2)</a> system call which is now part of POSIX and used by Mozilla.
<!-- 2022/10/24 -->
<li>Increased <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> paranoia when dealing with host/domain names coming from the resolver by refusing to follow CNAMEs with invalid characters and never writing a name with bad characters to a known_hosts file.
<li>Improved <a href="https://man.openbsd.org/scp.1">scp(1)</a> handling of globbing when using the SFTP protocol for transport.
<li>Stopped <a href="https://man.openbsd.org/netstart.8">netstart(8)</a> from waiting for autoconf during a dry-run (-n).
<!-- 2022/10/23 -->
<li>Made sure <a href="https://man.openbsd.org/apldma.4">apldma(4)</a> driver is attached before allocating a channel. Prevents a crash on M2 Macbook Air.
<li>Introduced <a href="https://man.openbsd.org/pijuice.4">pijuice(4)</a>, an apm/sensor driver for the PiJuice HAT UPS.
<li>Bumped tsleep timeout for <a href="https://man.openbsd.org/bwfm.4">bwfm(4)</a> PCI devices to help prevent failures loading firmware, particularly on Apple M2 laptops.
<li>Synced pbuild class for powerpc64 and riscv64 to amd64 and arm64, increasing to 8G.
<!-- 2022/10/22 -->
<li>Added support to <a href="https://man.openbsd.org/gunzip.1">gunzip(1)</a> for zip files that contain a single member.
<li>Bumped pbuild's login.conf datasize-cur to 8G on arm64.
<!-- 2022/10/21 -->
<li>Added hw.power, machdep.lidaction, and machdep.pwraction support for macppc.
<li>Allowed changing of immutable RW regions to R for recent chrome renderers.
<li>Adapted <a href="https://man.openbsd.org/sigaltstack.2">sigaltstack(2)</a> to work on mimmutable regions allowing the stack to be marked immutable again.
<li>Automatically marked immutable certain regions in program and <a href="https://man.openbsd.org/ld.so.1">ld.so(1)</a> LOADs.
<!-- 2022/10/20 -->
<li>Added hooks to disable and enable GPIO interrupts.
<li>Added support for the Rockchip RK3568 processor.
<li>Added zap-to-char and zap-up-to-char to <a href="https://man.openbsd.org/mg.1">mg(1)</a>. Bound zap-to-char to M-z.
<li>Stopped attempting to use EFI runtime services on UEFI versions before 2.1.
<li>Updated base libz to 1.2.13.
<li>Updated <a href="https://man.openbsd.org/unbound.8">unbound(8)</a> to 1.17.0.
<!-- 2022/10/19 -->
<li>Excluded /tmp/*.shm files from /tmp cleaning in <a href="https://man.openbsd.org/daily.8">daily(8)</a>. Removing them interferes with programs that use <a href="https://man.openbsd.org/shm_open.3">shm_open(3)</a>.
<li>Dropped support for $rc_exec in <a href="https://man.openbsd.org/rc.subr.8">rc.subr(8)</a>. The rc_exec function should be used instead.
<!-- 2022/10/18 -->
<li>Added support for the DS1339 RTC as found on the PiJuice.
<li>Initialized last_updown in <a href="https://man.openbsd.org/bgpd.8">bgpd(8)</a> so that it is reported correctly for peers that never managed to establish a connection.
<li>Fixed misidentification of <a href="https://man.openbsd.org/mpii.4">mpii(4)</a> RAID 1E.
<!-- 2022/10/17 -->
<li>Implemented uncached mapping on the StarFive JH7100 SoC.
<li>Converted more RTC drivers to use todr_attach(). Quality of the RTC is set such that "discrete" RTC chips are preferred over RTCs integrated on a SoC.
<li>Fixed ofwboot OpenFirmware "map" call. This fixed booting on some sparc64 machines.
<li>Fixed a potential <a href="https://man.openbsd.org/crypto.3">crypto(3)</a> divide by zero in BIO_dump_indent_cb().
<li>Fixed <a href="https://man.openbsd.org/crypto.3">crypto(3)</a> ASN.1 indefinite length encoding.
<li>Implemented openmetric output via the <a href="https://man.openbsd.org/bgpctl.8">bgpctl(8)</a> show metric command.
<li>Preserved the marked pane when renumbering windows in <a href="https://man.openbsd.org/tmux.1">tmux(1)</a>.
<!-- 2022/10/16 -->
<li>Improved the clickpad/touchpad detection in hidmt.
<li>Fixed a bug in the initialization mechanism of <a href="https://man.openbsd.org/wsmouse.4">wsmouse(4)</a>.
<!-- 2022/10/15 -->
<li>Converted the remaining I2C RTC drivers to use todr_attach().
<li>Implemented the RFC 8781 PREF64 router advertisement option in <a href="https://man.openbsd.org/rad.8">rad(8)</a>.
<!-- 2022/10/14 -->
<li>Added passing of boot device information from the bootloader to the kernel on luna88k.
<!-- 2022/10/13 -->
<li>Fixed a crash when using <a href="https://man.openbsd.org/virtio.4">virtio(4)</a> with <a href="https://man.openbsd.org/agintc.4">agintc(4)</a> by properly implementing LPI interrupts.
<li>Added support for the RK3568 PCIe controller to <a href="https://man.openbsd.org/dwpcie.4">dwpcie(4)</a>.
<li>Implemented support for message based interrupts on arm64.
<!-- 2022/10/12 -->
<li>Added client certificate authentication and an optional SASL EXTERNAL bind to <a href="https://man.openbsd.org/ypldap.8">ypldap(8)</a>.
<li>Allowed assigning a quality number to RTC implementations so the "best" RTC can be chosen if a system has more than one.
<!-- 2022/10/11 -->
<!-- 2022/10/10 -->
<li>Added support for the Rockchip RK817 PMIC.
<li>Restored recalculation of the checksum of normalized packets in <a href="https://man.openbsd.org/pf.4">pf(4)</a>.
<li>Fixed memory leak in the error path of <a href="https://man.openbsd.org/cdio.1">cdio(1)</a>.
<!-- 2022/10/09 -->
<li>Added support for the Rockchip RK3566/RK3568 SoCs.
<li>Added support for newlines inside the alternative names block in <a href="https://man.openbsd.org/acme-client.conf.5">acme-client.conf</a>.
<!-- 2022/10/08 -->
<li>Added support for Qualcomm SoCs to <a href="https://man.openbsd.org/sdhc.4">sdhc(4)</a>.
<li>Marked the signal trampoline and timekeep regions immutable at <a href="https://man.openbsd.org/execve.2">execve(2)</a> time.
<li>Added support for the Wacom One M CTL-672 tablet to <a href="https://man.openbsd.org/uwacom.4">uwacom(4)</a>.
<!-- 2022/10/07 -->
<li>Added support for showing the entry immutable bit to <a href="https://man.openbsd.org/procmap.1">procmap(1)</a>.
<li>Added a <a href="https://man.openbsd.org/mimmutable.2">mimmutable(2)</a> stub to libc and cranked the minor revision.
<li>Added support for the new "openbsd.mutable" section to <a href="https://man.openbsd.org/ld.bfd.1">ld.bfd(1)</a>, <a href="https://man.openbsd.org/ld.lld.1">ld.lld(1)</a>, <a href="https://man.openbsd.org/readelf.1">readelf(1)</a>, and <a href="https://man.openbsd.org/objdump.1">objdump(1)</a>.
<li>Added the new <a href="https://man.openbsd.org/mimmutable.2">mimmutable(2)</a> system call, which locks the permissions (PROT_*) of memory mappings so they cannot be changed by later <a href="https://man.openbsd.org/mmap.2">mmap(2)</a>, <a href="https://man.openbsd.org/mprotect.2">mprotect(2)</a>, or <a href="https://man.openbsd.org/munmap.2">munmap(2)</a> calls, which will error with EPERM instead.
<!-- 2022/10/06 -->
<li>Added identifiers for the new "mutable bss" ELF section.
<li>Fixed sparc64's ofwboot.net after it was broken by the last libz update.
<li>Made <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> honor the user's umask if it is more restrictive than the ssh default.
<li>Increased the number of <a href="https://man.openbsd.org/vdsp.4">vdsp(4)</a> devices created by default on sparc64 to 24.
<li>Made <a href="https://man.openbsd.org/ldomctl.8">ldomctl(8)</a> accept more descriptive name-based paths in addition to number-based paths in <a href="https://man.openbsd.org/ldom.conf.5">ldom.conf(5)</a>.
<!-- 2022/10/05 -->
<li>Made <a href="https://man.openbsd.org/installboot.8">installboot(8)</a> skip <a href="https://man.openbsd.org/softraid.4">softraid(4)</a> keydisks.
<!-- 2022/10/04 -->
<li>Switched <a href="https://man.openbsd.org/tftpd.8">tftpd(8)</a> to default to read-only unless -w is specified for write access (the previous default).
<li>Enabled the Data Independent Timing feature in both the kernel and userland on arm64 CPUs that support it to mitigate timing side-channel attacks.
<li>Stopped printing the prompt for non-interactive usage of <a href="https://man.openbsd.org/tftp.1">tftp(1)</a>.
<li>Changed <a href="https://man.openbsd.org/rarpd.8">rarpd(8)</a> to only unveil /tftpboot if -t is specified.
<!-- 2022/10/03 -->
<li>Added support for a clean shutdown with the power button to <a href="https://man.openbsd.org/dapmic.4">dapmic(4)</a>.
<li>Enabled use of absolute paths starting with /usr/share/zoneinfo while still rejecting other absolute paths for TZ.
<!-- 2022/10/02 -->
<!-- 2022/10/01 -->
<li>Removed "config file" support from makesyscalls.sh since it was only used for long-removed compat layers.
<!-- 2022/09/30 -->
<!-- 2022/09/29 -->
<!-- 2022/09/28 -->
<li>Fixed incorrect range check for size in <a href="https://man.openbsd.org/setvbuf.3">setvbuf(3)</a>.
<li>Fixed memory corruptions with sysv semaphores due to sleeps in <a href="https://man.openbsd.org/copyin.9">copyin(9)</a>, <a href="https://man.openbsd.org/copyout.9">copyout(9)</a>, and <a href="https://man.openbsd.org/malloc.9">malloc(8)</a>.
<li>Added scroll-top and scroll-bottom <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> commands to scroll so cursor is at the top or bottom respectively.
<li>Added a -T flag to <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> capture-pane to capture up to the last used cell and not the full width of the pane.
<!-- 2022/09/27 -->
<!-- 2022/09/26 -->
<li>Changed use of here documents in install.sub to eliminate the need for escaping and improve readability.
<li>Moved to 7.2-current.
</ul>
