<!doctype html>
<html lang=en id=plus>
<meta charset=utf-8>
<title>OpenBSD -current Changelog</title>
<meta name="description" content="OpenBSD -current changes">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/plus.html">
<style>
strong {
	color: var(--red);
	font-weight: normal;
}

h3 {
	color: var(--blue);
}
</style>

<h2 id=OpenBSD>
<a href="index.html">
<i>Open</i><b>BSD</b></a>
-current Changelog
</h2>
<hr>

<p>
This selection is intended to include all important
and all user-visible changes.
For a complete record of all changes, please see the "source-changes"
mailing list, called "OpenBSD CVS"
in the <a href="https://marc.info/?l=openbsd-cvs">archives</a>,
or use <a href="anoncvs.html#CVS">CVS</a>.

<p>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>,
<a href="plus52.html">5.2</a>,
<a href="plus53.html">5.3</a>,
<br>
<a href="plus54.html">5.4</a>,
<a href="plus55.html">5.5</a>,
<a href="plus56.html">5.6</a>,
<a href="plus57.html">5.7</a>,
<a href="plus58.html">5.8</a>,
<a href="plus59.html">5.9</a>,
<a href="plus60.html">6.0</a>,
<a href="plus61.html">6.1</a>,
<a href="plus62.html">6.2</a>,
<a href="plus63.html">6.3</a>,
<a href="plus64.html">6.4</a>,
<a href="plus65.html">6.5</a>,
<a href="plus66.html">6.6</a>,
<a href="plus67.html">6.7</a>,
<a href="plus68.html">6.8</a>,
<a href="plus69.html">6.9</a>,
<a href="plus70.html">7.0</a>,
<br>
<a href="plus71.html">7.1</a>,
<a href="plus72.html">7.2</a>,
<a href="plus73.html">7.3</a>,
<a href="plus74.html">7.4</a>,
<a href="plus75.html">7.5</a>,
<a href="plus76.html">7.6</a>.
<br>

<p>
<h3>Changes made between OpenBSD 7.5 and -current</h3>
<p>

<ul>
<!-- 2024/06/30 -->
<li>Moved to openssh-9.8.
<li>Retired <a href="https://man.openbsd.org/dhclient.8">dhclient(8)</a>.  <a href="https://man.openbsd.org/dhcpleased.8">dchpleased(8)</a> now handles IPv4 DHCP lease acquisition.
<li>Added <a href="https://man.openbsd.org/rge.4">rge(4)</a> support for the Realtek RTL8126 chip.
<!-- 2024/06/29 -->
<li>Disabled <a href="https://man.openbsd.org/unwind.8">unwind(8)</a> shared cache between resolvers to prevent segfault after libunbound update.
<!-- 2024/06/28 -->
<!-- 2024/06/27 -->
<!-- 2024/06/26 -->
<li>Pushed socket re-lock to the <a href="https://man.openbsd.org/vnode.9">vnode(9)</a> release path within unp_detach().
<!-- 2024/06/25 -->
<li>Implemented RSA key exchange in constant time.
<li>Implemented sleep button and EC events as wakeup events in <a href="https://man.openbsd.org/acpi.4">acpi(4)</a>.
<!-- 2024/06/24 -->
<li>Added <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> "refresh-client -r" for control mode clients to provide OSC 10 and 11 responses to tmux so they can set the default foreground and background colors.
<li>Made <a href="https://man.openbsd.org/acpibat.4">acpibat(4)</a> forward AC change notifications to <a href="https://man.openbsd.org/acpiac.4">acpiac(4)</a>, giving access to programs like <a href="https://man.openbsd.org/apm.8">apm(8)</a>.
<li>Added AMD SEV-related information provided by cpuid to <a href="https://man.openbsd.org/dmesg.8">dmesg(8)</a>.
<!-- 2024/06/23 -->
<li>Add support for ACPI firmware that provides the base address of individual GIC redistributors in the per-CPU GIC MADT table entries.
<li>Added RK3588 support to <a href="https://man.openbsd.org/rkusbphy.4">rkusbphy(4)</a>.
<li>Enabled EPAN when available on arm64.
<!-- 2024/06/22 -->
<!-- 2024/06/21 -->
<!-- 2024/06/20 -->
<li>Allowed the EFI devicetree fixup protocol to specify the amount of space needed.
<li>Stopped sending ICMP redirect when IP forwarding is IPsec-only.
<li>Protected global vm and vcpu state in <a href="https://man.openbsd.org/vmd.8">vmd(8)</a> with mutex.
<li>Enabled uvm percpu caches on luna88k.
<!-- 2024/06/19 -->
<!-- 2024/06/18 -->
<li>Used BUILDINFO to make sure <a href="https://man.openbsd.org/sysupgrade.1">sysupgrade(1)</a> doesn't install an older snapshot over a newer one.
<!-- 2024/06/17 -->
<li>Ensured loading a device tree using the "mach dtb" command gives firmware a chance to make modifications by using the EFI devicetree fixup protocol.
<li>Disabled the DSA signature algorithm by default.
<li>Added a "log" option to <a href="https://man.openbsd.org/relayd.conf.5">relayd.conf(5)</a> rules.
<li>Made <a href="https://man.openbsd.org/relayd.8">relayd(8)</a> host handle disable/enable commands from <a href="https://man.openbsd.org/relayctl.8">relayctl(8)</a> correctly in case multiple redirect instances use the same host in <a href="https://man.openbsd.org/relayd.8">relayd(8)</a> tables.
<!-- 2024/06/16 -->
<!-- 2024/06/15 -->
<!-- 2024/06/14 -->
<li>Switched AF_ROUTE sockets to the new locking scheme.
<li>Ignored universal ctags extended metadata in tagaddress, making <a href="https://man.openbsd.org/mg.1">mg(1)</a> search patterns work again.
<li>Made arc4random() depend on fewer subsystems by decoupling extract_entropy() from the enqueue_randomness() logic.
<!-- 2024/06/13 -->
<li>Made ssh-<a href="https://man.openbsd.org/keyscan.1">keyscan(1)</a> host/banner comments go to stderr instead of stdout and added a -q flag to silence them.
<li>Updated unbound to 1.20.0.
<li>Enabled uvm percpu caches on sparc64.
<!-- 2024/06/12 -->
<li>Split ssh PerSourcePenalties address tracking to use separate tables and optionally different overflow policies, preventing misbehavior from IPv6 addresses from affecting IPv4 connections.
<li>Added support for the AMD Platform Security Processor (PSP) to <a href="https://man.openbsd.org/ccp.4">ccp(4)</a>.
<li>Added RK3588 support to <a href="https://man.openbsd.org/rktemp.4">rktemp(4)</a>.
<!-- 2024/06/11 -->
<li>Avoided powering down PCI devices when rebooting (satisfying some machines).
<li>Enabled UVM percpu cache on riscv64.
<li>Clamped CPU clock frequencies to [min,max] range when determining the initial perflevel for arm, arm64 and riscv64.
<li>Added RK3588 TSADC clocks and resets to <a href="https://man.openbsd.org/rkclock.4">rkclock(4)</a>.
<!-- 2024/06/10 -->
<li>Enabled TCP Large Receive Offload in <a href="https://man.openbsd.org/vio.4">vio(4)</a> and introduced the guest offload feature to turn LRO off/on.
<li>Allowed multiple EKU OIDs for BGPsec certs in <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a>.
<li>Fixed a bug in <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a> for BGPsec Router certs where key usage was ignored.
<!-- 2024/06/09 -->
<li>Introduced IFCAP_VLAN_HWOFFLOAD for <a href="https://man.openbsd.org/vio.4">vio(4)</a> to signal handware can handle checksum or TSO offloading with inline VLAN tags.
<li>Introduced a new <a href="https://man.openbsd.org/smtpd.8">smtpd(8)</a> K_AUTH service to allow offloading the credentials to a table for non-<a href="https://man.openbsd.org/crypt.3">crypt(3)</a> authentication.
<li>Included BUILDINFO file in the iso/img files and installed it in the miniroot if available.
<li>Made <a href="https://man.openbsd.org/security.8">security(8)</a> silently ignore setuid changes in relinked binaries to reduce false positives.
<!-- 2024/06/08 -->
<li>Improved <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a> x509_get_purpose() to recognize TA and EE certs in addition to differentiating between CA and BGPsec Router certs.
<li>Stopped <a href="https://man.openbsd.org/sysupgrade.8">sysupgrade(8)</a> from enforcing the next version key if installing a snapshot.
<!-- 2024/06/07 -->
<li>Ensured the deepest possible C-state is selected during suspend-to-idle on amd64 and i386.
<li>Enabled TCP Large Receive Offload in <a href="https://man.openbsd.org/vmx.4">vmx(4)</a>.
<li>Reworked <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a> trust anchor handling to prevent replay attacks where a man in the middle could supply valid TA certificates with outdated internet number resources.
<!-- 2024/06/06 -->
<li>Enabled PerSourcePenalties by default in <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>.
<li>Added <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> ability to penalize problematic client behavior with penalties of increasing duration against the client'by enabling <a href="https://man.openbsd.org/sshd_config.5">sshd_config(5)</a> option PerSourcePenalties. PerSourcePenaltyExemptList can be used to specify certain address ranges to exempt from penalties.
<!-- 2024/06/05 -->
<li>Added support for VLAN tag offloading to <a href="https://man.openbsd.org/dwqe.4">dwqe(4)</a>.
<!-- 2024/06/04 -->
<li>Enabled -fret-clean on amd64 for libc, libcrypto, ld.so, kernel, and all the ssh tools.
<li>Added hibernation support for <a href="https://man.openbsd.org/ufshci.4">ufshci(4)</a>.
<li>Enabled hibernate/resume to <a href="https://man.openbsd.org/nvme.4">nvme(4)</a> disks with 4096 byte sectors.
<li>Ensured concurrent calls to dequeue_randomness() will use some different events.
<!-- 2024/06/03 -->
<!-- 2024/06/02 -->
<li>Added -fret-clean option (amd64 and i386 only at first) to the compiler, defaulting to off. This causes the caller to clean the return address off the stack after a callq completes.
<li>Changed pledge, MAP_STACK and pinsyscall failures to use <a href="https://man.openbsd.org/uprintf.9">uprintf(9)</a> rather than writing into <a href="https://man.openbsd.org/dmesg.8">dmesg(8)</a>.
<li>Introduced <a href="https://man.openbsd.org/dhcp6leased.8">dhcp6leased(8)</a>, a daemon to manage IPv6 prefix delegations.
<!-- 2024/06/01 -->
<li>Updated to xorgproto 2024.1.
<li>Fixed <a href="https://man.openbsd.org/sndiod.8">sndiod(8)</a> server.device entries disappearing when usb devices are unplugged while in use.
<!-- 2024/05/31 -->
<li>Made <a href="https://man.openbsd.org/rad.8">rad(8)</a> honor prefixes delegated by DHCPv6.
<li>Added a warning when the deprecated <a href="https://man.openbsd.org/sshd.8">sshd(8)</a> -r option is passed.
<!-- 2024/05/30 -->
<li>Ensured pmap_create() waits in the case of kernel virtual space shortage.
<!-- 2024/05/29 -->
<li>Fixed WEP on <a href="https://man.openbsd.org/athn.4">athn(4)</a> USB hostap, preventing potential "key not installed for sw crypto" panic.
<li>Added an implementation of "suspend-to-idle" on amd64, enabling suspend on machines that don't support S3.
<li>Converted SCHED_LOCK from a recursive kernel lock to a mutex.
<!-- 2024/05/28 -->
<li>Reworked the pmap ASID handling to not require the SCHED_LOCK.
<li>Added a reset attempt for <a href="https://man.openbsd.org/qwx.4">qwx(4)</a> devices when firmware crashes.
<li>Made <a href="https://man.openbsd.org/qwx.4">qwx(4)</a> offload TKIP and CCMP crypto to hardware, fixing ARP and IPv6 multicast with WPA2.
<!-- 2024/05/27 -->
<!-- 2024/05/26 -->
<li>Fixed suspend/resume for <a href="https://man.openbsd.org/ums.4">ums(4)</a> and <a href="https://man.openbsd.org/umt.4">umt(4)</a>.
<li>Prevented rkpmic4 power down after resume initiated by pressing the power button.
<li>Added <a href="https://man.openbsd.org/rkpmic.4">rkpmic(4)</a> support for configuring sleep voltage settings based on device tree settings for the RK809.
<li>Implemented wakeup interrupts on amd64.
<!-- 2024/05/25 -->
<!-- 2024/05/24 -->
<li>Added "N" to search backwards in <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> tree modes.
<li>Added support for NVMe passthrough commands to allow software to get information about <a href="https://man.openbsd.org/nvme.4">nvme(4)</a> disks.
<li>Added <a href="https://man.openbsd.org/ufshci.4">ufshci(4)</a> support for suspend/resume.
<li>Fixed <a href="https://man.openbsd.org/pfsync.4">pfsync(4)</a> TCP-state not being updated for destination connection peer and reduced excessive pfsync traffic.
<li>Enabled UFS "Auto-Hibernation" in <a href="https://man.openbsd.org/ufshci.4">ufshci(4)</a>.
<!-- 2024/05/23 -->
<li>Added support for Quectel EM060K to <a href="https://man.openbsd.org/umb.4">umb(4)</a>.
<!-- 2024/05/22 -->
<li>Added <a href="https://man.openbsd.org/mwx.4">mwx(4)</a> support for MT7922.
<li>Fixed in-place decryption for EVP_chacha20_poly1305(), fixing hangs during the QUIC handshake with HAProxy using TLS_CHACHA20_POLY1305_SHA256.
<!-- 2024/05/21 -->
<!-- 2024/05/20 -->
<!-- 2024/05/19 -->
<li>Mapped MSI-X in addition to MSI and INTx on <a href="https://man.openbsd.org/rge.4">rge(4)</a>.
<!-- 2024/05/18 -->
<!-- 2024/05/17 -->
<li>Switched AF_KEY sockets to the new locking scheme.
<li>Used <a href="https://man.openbsd.org/pathconfat.2">pathconfat(2)</a> to compare mtimes for the <a href="https://man.openbsd.org/pax.1">pax(1)</a> -u and -Z options when the target is "too old."
<li>Turned sblock() to sb_lock <a href="https://man.openbsd.org/rwlock.9">rwlock(9)</a> wrapper for all sockets. With this unification, sblock() should always be taken before solock() in all involved paths.
<li>Added <a href="https://man.openbsd.org/pathconfat.2">pathconfat(2)</a>: <a href="https://man.openbsd.org/pathconf.2">pathconf(2)</a> but with at-fd and flags arguments, the latter supporting the ability to get timestamp resolution of symlinks.
<li>Made <a href="https://man.openbsd.org/rad.8">rad(8)</a> send source link-layer address option in router advertisements, preventing Apple devices from installing an unusable default route.
<li>Fixed signal handling and locking in <a href="https://man.openbsd.org/vio.4">vio(4)</a> sysctl path.
<!-- 2024/05/16 -->
<li>Created a new style relink-kit for <a href="https://man.openbsd.org/sshd-sesion.8">sshd-sesion(8)</a>.
<li>Fixed IPsec in use with IP forwarding 2 logic.
<!-- 2024/05/15 -->
<!-- 2024/05/14 -->
<li>Added CH9102 support to <a href="https://man.openbsd.org/uchcom.4">uchcom(4)</a>.
<li>Updated to perl-5.38.2.
<li>Ensured giving UTF-8 command line arguments to <a href="https://apropos.openbsd.org/apropos.1">apropos(1)</a> allows searching in UTF-8 and ISO-Latin-1 encoded manual pages if the <a href="https://man.openbsd.org/mandoc.db.5">mandoc.db(5)</a> was built makewhatis -T utf8.
<!-- 2024/05/13 -->
<li>Ignored button events for the first ten seconds after resume to prevent some ACPI implementations from initiating a power down.
<li>Updated libpciaccess to 0.18.1.
<li>Added <a href="https://man.openbsd.org/bio.4">bio(4)</a> support to <a href="https://man.openbsd.org/nvme.4">nvme(4)</a>.
<li>Implemented hardware masking for MSI and MSI-X on amd64.
<!-- 2024/05/12 -->
<li>Added support for using the power button function of the RK809 to <a href="https://man.openbsd.org/rkpmic.4">rkpmic(4)</a>.
<li>Made <a href="https://man.openbsd.org/installboot.8">installboot(8)</a> run again after <a href="https://man.openbsd.org/fw_update.8">fw_update(8)</a> on Apple silicon to pick up Apple boot firmware.
<!-- 2024/05/11 -->
<li>Used %b to format amd64 cpu flag info in <a href="https://man.openbsd.org/dmesg.8">dmesg(8)</a> to include raw values and streamlined display of flag information.
<!-- 2024/05/10 -->
<li>Fixed a problem in <a href="https://man.openbsd.org/pax.1">pax(1)</a> where the file list output was fully-buffered when used as part of a pipeline.
<li>Unlocked <a href="https://man.openbsd.org/sigsuspend.2">sigsuspend(2)</a> and __thrsigdivert syscalls.
<!-- 2024/05/09 -->
<li>Enabled <a href="https://man.openbsd.org/ufshci.4">ufshci(4)</a> on amd64.
<li>Added missing error checks to all calls under libexec and sbin in case of <a href="https://man.openbsd.org/ctime.3">ctime(3)</a> and <a href="https://man.openbsd.org/ctime.3">ctime_r(3)</a> failures when timestamps are far off.
<!-- 2024/05/08 -->
<li>Suppressed cache-info <a href="https://man.openbsd.org/dmesg.8">dmesg(8)</a> lines when they are identical to the previous CPU (amd64).
<li>Forced MSS of TSO packets in hardware supported range in <a href="https://man.openbsd.org/ixl.4">ixl(4)</a>.
<li>Fixed <a href="https://man.openbsd.org/iwx.4">iwx(4)</a> monitor mode after firmware update.
<li>Prevented firmware panic when <a href="https://man.openbsd.org/iwx.4">iwx(4)</a> runs in monitor mode with addresses configured on the interface and leaving 11n/11ac mode directly for monitor mode.
<!-- 2024/05/07 -->
<li>Added <a href="https://man.openbsd.org/smtpd-tables.7">smtpd-tables(7)</a>, an API to implement <a href="https://man.openbsd.org/table.5">table(5)</a> for <a href="https://man.openbsd.org/smtpd.8">smtpd(8)</a>.
<!-- 2024/05/06 -->
<li>Added support for Tx checksum offloading to <a href="https://man.openbsd.org/dwqe.4">dwqe(4)</a>.
<!-- 2024/05/05 -->
<li>Exposed <a href="https://man.openbsd.org/igc.4">igc(4)</a> hardware counters to <a href="https://man.openbsd.org/kstat.1">kstat(1)</a>.
<!-- 2024/05/04 -->
<li>Updated <a href="https://man.openbsd.org/awk.1">awk(1)</a> to the May 4, 2024 version.
<li>Added TSO capabilities to <a href="https://man.openbsd.org/igc.4">igc(4)</a>.
<!-- 2024/05/03 -->
<li>Pushed solock() down to sosend() and removed it from soreceive() paths for <a href="https://man.openbsd.org/unix.4">unix(4)</a> sockets.
<li>Fixed <a href="https://man.openbsd.org/qwx.4">qwx(4)</a> display in <a href="https://man.openbsd.org/ifconfig.8">ifconfig(8)</a> showing a mix of 802.11 modes after switching APs.
<li>Made <a href="https://man.openbsd.org/witness.4">witness(4)</a> display lock cycles longer than two locks.
<li>Made "show witness" display <a href="https://man.openbsd.org/witness.4">witness(4)</a> lock subtypes.
<li>Added support for Rx checksum offloading to <a href="https://man.openbsd.org/dwqe.4">dwqe(4)</a>.
<!-- 2024/05/02 -->
<li>Made <a href="https://man.openbsd.org/sndiod.8">sndiod(8)</a> discover new devices on SIGHUP and switch if a new device is higher priority (greater -F option number) than the current device.
<li>Aligned CRL and CSR version printing with certs.
<li>Fixed <a href="https://man.openbsd.org/smtpd.8">smtpd(8)</a> IPv6 address parsing in file-backed <a href="https://man.openbsd.org/table.5">table(5)</a>.
<li>Added <a href="https://man.openbsd.org/vmctl.8">vmctl(8)</a> "status -r" to limit the output of "vmctl status" to only running VMs.
<!-- 2024/05/01 -->
<li>Added per-CPU caches to the pmemrange allocator.
<!-- 2024/04/30 -->
<li>Pushed solock() down to sosend() for SOCK_RAW sockets.
<li>Fixed <a href="https://man.openbsd.org/sftp-server.8">sftp-server(8)</a> home-directory extension implementation.
<!-- 2024/04/29 -->
<li>Enabled <a href="https://man.openbsd.org/em.4">em(4)</a> on powerpc64.
<li>Dropped the <a href="https://man.openbsd.org/vmm.4">vmm(4)</a> and <a href="https://man.openbsd.org/vmd.8">vmd(8)</a> "continue" flag to simplify running a vcpu.
<!-- 2024/04/28 -->
<li>Allowed writing buffers larger than BUFSIZ or st_blksize, vastly improving write performance.
<li>Updated libxkbfile to 1.1.3.
<li>Updated libXvMC to 1.0.14.
<li>Updated libfontenc to 1.1.8.
<li>Updated util-macros to 1.20.1.
<li>Updated makedepend to 1.0.9.
<li>Updated gccmakedep to 1.0.4.
<li>Updated font-util to 1.4.1.
<li>Updated encodings to 1.1.0.
<li>Updated xorg-docs to 1.7.3.
<li>Updated xsm to 1.0.6.
<li>Updated xrefresh to 1.1.0.
<li>Updated xprop to 1.2.7.
<li>Updated xpr to 1.2.0.
<li>Updated xmore to 1.0.4.
<li>Updated xmessage to 1.0.7.
<li>Updated xlsfonts to 1.0.8.
<li>Updated xload to 1.2.0.
<li>Updated xkbutils to 1.0.6.
<li>Updated xfontsel to 1.1.1.
<li>Updated xev to 1.2.6.
<li>Updated xedit to 1.2.4.
<li>Updated mkfontscale to 1.2.3.
<li>Updated xauth to 1.1.3.
<li>Updated listres to 1.0.6.
<li>Updated iceauth to 1.0.10.
<li>Updated editres to 1.0.9.
<li>Updated bitmap to 1.1.1.
<!-- 2024/04/27 -->
<li>Updated xserver to 21.1.13.
<!-- 2024/04/26 -->
<!-- 2024/04/25 -->
<li>Updated <a href="https://man.openbsd.org/awk.1">awk(1)</a> to the Apr 22, 2024 version.
<li>Added <a href="https://man.openbsd.org/boot.8">boot.conf(8)</a> "machine idle [secs]" to halt at idle passphrase prompts for <a href="https://man.openbsd.org/efi.4">efi(4)</a> systems.
<li>Masked off MAC management counter interrupts to prevent an interrupt storm in <a href="https://man.openbsd.org/dwqe.4">dwqe(4)</a>.
<!-- 2024/04/24 -->
<li>Used -mno-fpu when compiling sparc64 with clang.
<li>Added display of the current line number as percentage of the total lines in <a href="https://man.openbsd.org/vi.1">vi(1)</a> ruler.
<li>Removed <a href="https://man.openbsd.org/bgpd.8">bgpd(8)</a> 'announce capabilities' as neighbor config stanza.
<!-- 2024/04/23 -->
<li>Implemented RFC 4191 Default Router Preferences in <a href="https://man.openbsd.org/rad.8">rad(8)</a>.
<li>Made <a href="https://man.openbsd.org/ftp.1">ftp(1)</a> send Host: headers with CONNECT requests when tunneling TLS over an HTTP proxy.
<!-- 2024/04/22 -->
<li>Allowed the <a href="https://man.openbsd.org/newsyslog.8">newsyslog(8)</a> -F flag to be used on its own.
<li>Added display of <a href="https://man.openbsd.org/pf.4">pf(4)</a> fragment reassembly counters to <a href="https://man.openbsd.org/pfctl.8">pfctl(8)</a> and <a href="https://man.openbsd.org/systat.1">systat(1)</a>.
<li>Stopped <a href="https://man.openbsd.org/bgpd.8">bgpd(8)</a> from falling back to no capabilities when there is an OPEN/optional attribute error.
<!-- 2024/04/21 -->
<li>Changed <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a> to require -x to enable P-256 support.
<li>Implemented rule 5.5 of RFC 6724 (Default Address Selection for IPv6) to prefer addresses in a prefix advertised by the next-hop.
<li>Mandated presence of CMS signing-time and disallowed binary-signing-time in <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a>-client8.
<!-- 2024/04/20 -->
<!-- 2024/04/19 -->
<li>Fixed <a href="https://man.openbsd.org/ufshci.4">ufshci(4)</a> alignment issue where a DMA transfer scheduled on an odd slot would fail.
<li>Permitted null requests (aka server pings) from non-reserved ports in nfs.
<!-- 2024/04/18 -->
<!-- 2024/04/17 -->
<li>Provided crypto constant time operations for uint8_t.
<li>Synced RPKI Trust Anchor constraints to nro-delegated-stats.
<li>Set <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a> to Accept: */* HTTP header.
<li>Made <a href="https://man.openbsd.org/ftp.1">ftp(1)</a> send 'Accept */*' header.
<!-- 2024/04/16 -->
<li>Switched <a href="https://man.openbsd.org/tar.1">tar(1)</a> write default format to 'pax'.
<li>Fixed reading large <a href="https://man.openbsd.org/pax.1">pax(1)</a> extended records.
<li>Added <a href="https://man.openbsd.org/tar.1">tar(1)</a> -F option to select write format.
<li>Corrected detection of 'pax' format archives in <a href="https://man.openbsd.org/pax.1">pax(1)</a> append mode.
<li>Updated Spleen kernel fonts to version 2.1.0.
<li>Fixed key share negotiation in HRR case.
<li>Prevented toctu issues in <a href="https://man.openbsd.org/httpd.8">httpd(8)</a> static file serving and auto index generation.
<li>Use route cache function in IP input.
<li>Made raw IPv4 and IPv6 sockets handle input in parallel.
<!-- 2024/04/15 -->
<li>Switched <a href="https://man.openbsd.org/pax.1">pax(1)</a> to write archives using the 'pax' format by default. Ramdisk versions will keep using ustar for writing.
<li>Added <a href="https://man.openbsd.org/scandirat.3">scandirat(3)</a> from FreeBSD.
<li>Prevented a hang when the nvme controller has disconnected from the pcie bus.
<!-- 2024/04/14 -->
<li>Removed support for the <a href="https://less.openbsd.org/less.1">less(1)</a> LESSOPEN and LESSCLOSE environment variables.
<li>Implemented support for AVX-512.
<li>Escaped newlines in file names in <a href="https://less.openbsd.org/less.1">less(1)</a>.
<!-- 2024/04/13 -->
<li>Protected <a href="https://man.openbsd.org/vmm.4">vmm(4)</a> activation with the vmm_softc rwlock.
<!-- 2024/04/12 -->
<li>Updated nsd to 4.9.1.
<li>Updated unbound to 1.19.3.
<li>Split single TCP inpcb table into IPv4 and IPv6 parts.
<!-- 2024/04/11 -->
<li>Added <a href="https://man.openbsd.org/uchcom.4">uchcom(4)</a> support for the CH343 uart.
<li>Prevented userland change of the interface loopback flag, preventing a potential kernel crash.
<!-- 2024/04/10 -->
<li>Added <a href="https://man.openbsd.org/mcx.4">mcx(4)</a> support for media types from the extended ethernet capabilities fields, fixing a gigabit SFP in the ConnectX-6 Lx.
<li>Made TCP debug code MP safe.
<li>Implemented TCP segmentation offload for <a href="https://man.openbsd.org/vio.4">vio(4)</a>.
<li>Fixed incorrect scaling when converting disk images in <a href="https://man.openbsd.org/vmctl.8">vmctl(8)</a>.
<li>Added <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> option allow-set-title to forbid applications from changing the pane title.
<li>Prevented a crash if focusing a pane in <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> that is exiting.
<!-- 2024/04/09 -->
<li>Allowed operators to enforce the presence of certain capabilities in <a href="https://man.openbsd.org/bgpd.8">bgpd(8)</a> sessions.
<li>Added PCI support for <a href="https://man.openbsd.org/ufshci.4">ufshci(4)</a>.
<li>Increased RTR PDU limit to 48k and limited number of SPAS to 10,000 in <a href="https://man.openbsd.org/bgpd.8">bgpd(8)</a>.
<li>Removed the armv7 "cubie" miniroot.
<!-- 2024/04/08 -->
<!-- 2024/04/07 -->
<li>Updated xserver to 21.1.12.
<!-- 2024/04/06 -->
<li>Communicated cache-coherent DMA status on RISC-V via flags.
<li>Restricted use of direct mapping following support of RISC-V CPUs with MMUs with memory cacheability attributes.
<li>Prevented IP multicast <a href="https://man.openbsd.org/sysctl.2">sysctl(2)</a> <a href="https://man.openbsd.org/mrtmfc.2">mrtmfc(2)</a> from writing outside of allocation.
<!-- 2024/04/05 -->
<li>Used <a href="https://man.openbsd.org/pinsyscalls.2">pinsyscalls(2)</a> to ensure libc.so is still treated as xonly with the removal of <a href="https://man.openbsd.org/msyscall.2">msyscall(2)</a>.
<li>Removed <a href="https://man.openbsd.org/msyscall.2">msyscall(2)</a>.
<!-- 2024/04/04 -->
<!-- 2024/04/03 -->
<li>Stopped grabbing the kernel lock in <a href="https://man.openbsd.org/kbind.2">kbind(2)</a>.
<li>Enabled PAC in addition to BTI on arm64 such that JIT code matches the default branch protection provided by our base compiler.
<!-- 2024/04/02 -->
<li>Implemented and enabled TSO in <a href="https://man.openbsd.org/vmx.4">vmx(4)</a>.
<li>Implemented SO_ACCEPTCONN in <a href="https://man.openbsd.org/getsockopt.2">getsockopt(2)</a>.
<li>Deleted the msyscall mechanism, now replaced by the stricter mimmutable+pinsyscalls.
<li>Updated Mesa to 23.3.6.
<!-- 2024/04/01 -->
<li>Made <a href="https://man.openbsd.org/spamd.8">spamd(8)</a> advertise SMTPUTF8 and 8BITMIME extensions in EHLO, fixing potential interoperability issues when the real MTA supports those extensions.
<li>Fixed a crash in <a href="https://man.openbsd.org/sndiod.8">sndiod(8)</a> when the device is disconnected and the clients are not migrated to another device.
<li>Created new-style relink kits for <a href="https://man.openbsd.org/sshd.8">sshd(8)</a> and <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>.
<li>Updated libexpat to 2.6.2.
<li>Enforced the <a href="https://man.openbsd.org/pinsyscalls.2">pinsyscalls(2)</a> rules on non-static/ld.so/libc.so text segments.
<li>Added clocks for the RK3588 PWM controller to <a href="https://man.openbsd.org/rkclock.4">rkclock(4)</a>.
<!-- 2024/03/31 -->
<li>Restricted <a href="https://man.openbsd.org/listen.2">listen(2)</a> to sockets of type SOCK_STREAM or SOCK_SEQPACKET.
<li>Marked 'so_rcv' sockbuf of <a href="https://man.openbsd.org/udp.4">udp(4)</a> sockets as SB_OWNLOCK.
<!-- 2024/03/30 -->
<li>Prevented recursion inside <a href="https://man.openbsd.org/wakeup.9">wakeup(9)</a> when scheduler tracepoints are enabled.
<li>Repaired malloc operation on systems where the <a href="https://man.openbsd.org/malloc.3">malloc(3)</a> page size is larger than the mmu page size.
<!-- 2024/03/29 -->
<li>Stopped building the objective-C compiler.
<li>Used SBI calls to reboot or power down riscv64 machine when supported by firmware.
<li>Implemented Ed25519 signatures for CMS (RFC 8419).
<!-- 2024/03/28 -->
<li>Fixed access to Alder Lake-N and Elkhart Lake eMMC.
<!-- 2024/03/27 -->
<li>Removed pinsyscall(2) now that it has been replaced by <a href="https://man.openbsd.org/pinsyscalls.2">pinsyscalls(2)</a>.
<li>Ensured the Milk-V Pioneer serial console is found.
<li>Introduced SB_OWNLOCK to mark sockets which 'so_rcv' buffer modified outside socket lock.
<li>Added support to have <a href="https://man.openbsd.org/bcmpcie.4">bcmpcie(4)</a> as both PCIe bus and simplebus to enable use of the Raspberry Pi 5's RP1 I/O controller.
<li>Fixed a crash in <a href="https://man.openbsd.org/ls.1">ls(1)</a> -l for files with bogus timestamp values.
<!-- 2024/03/26 -->
<li>Fixed memory detection on the Milk-V Pioneer board.
<li>Implemented support for the RISC-V UEFI Boot Protocol.
<li>Implemented the chmod a-x bsd.upgrade trick in the sparc64 ofwboot bootloader.
<li>Rejected setting invalid versions for certs, CRLs and CSRs.
<li>Used 'sb_mtx' to protect 'so_rcv' buffer of unix4 sockets.
<li>Added error code support to libtls.
<!-- 2024/03/25 -->
<li>Added VLAN_HWTAGGING capability to <a href="https://man.openbsd.org/igc.4">igc(4)</a>.
<li>Unlocked <a href="https://man.openbsd.org/shutdown.2">shutdown(2)</a>.
<li>Introduced <a href="https://man.openbsd.org/rpigpio.4">rpigpio(4)</a>, a driver for the RP1 GPIO controller on the Raspberry Pi 5.
<!-- 2024/03/24 -->
<li>Implemented resetting the PHY via a GPIO pin in <a href="https://man.openbsd.org/cad.4">cad(4)</a>, helping to enable the PHY on the Raspberry Pi 5.
<li>Removed obsolete <a href="https://whois.openbsd.org/whois.1">whois(1)</a> handle support.
<li>Converted libressl to use the BoringSSL style time conversions.
<!-- 2024/03/23 -->
<li>Added Meinberg PCI510 to <a href="https://man.openbsd.org/mbg.4">mbg(4)</a>.
<!-- 2024/03/22 -->
<li>Made local ports bound during <a href="https://man.openbsd.org/connect.2">connect(2)</a> unique per laddr rather than globally unique.
<li>Added <a href="https://patch.openbsd.org/patch.1">patch(1)</a> "-V none" to prevent making any backups.
<li>Fixed <a href="https://man.openbsd.org/chroot.2">chroot(2)</a> call in the <a href="https://man.openbsd.org/lpd.8">lpd(8)</a> control process.
<li>Limited NFS connections to originate from a reserved port.
<li>Allowed any device sample encoding in <a href="https://aucat.openbsd.org/aucat.1">aucat(1)</a>.
<!-- 2024/03/21 -->
<li>Reduced <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> escape-time default to 10 milliseconds (from 500).
<li>Added display-menu -M to <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> to always turn mouse on in a menu.
<li>Added AUDIO_GETDEV ioctl to "audio" <a href="https://man.openbsd.org/pledge.2">pledge(2)</a>.
<!-- 2024/03/20 -->
<li>Added generic channel mapping in place of <a href="https://aucat.openbsd.org/aucat.1">aucat(1)</a> -j and -c options.
<!-- 2024/03/19 -->
<!-- 2024/03/18 -->
<li>Reduced <a href="https://man.openbsd.org/dmesg.8">dmesg(8)</a> spam by only printing about PCI resource conflicts for resources that are enabled.
<li>Implemented Spectre-V4 mitigations for arm64.
<li>Exposed <a href="https://man.openbsd.org/aggr.4">aggr(4)</a> per port information via <a href="https://man.openbsd.org/kstat.1">kstat(1)</a>.
<!-- 2024/03/17 -->
<!-- 2024/03/16 -->
<li>Mitigated the RFDS (Register File Data Sampling) vulnerability present in Intel Atom CPUs (requires updated firmware).
<li>Made the LEDs work on the SolidRun ClearFog CN9130 Base.
<li>Fixed signed integer overflow in bnrand().
<!-- 2024/03/15 -->
<li>Trimmed output of <a href="https://whois.openbsd.org/whois.1">whois(1)</a> to suppress some uninformative output by default, still accessible verbatim by using whois -S.
<li>Set ORIGINAL_RECIPIENT in the environment of MDA scripts for <a href="https://man.openbsd.org/smtpd.8">smtpd(8)</a> postfix compatibility.
<li>Prevented potential firmware errors in Intel wifi drivers when APs send an ADDBA request early.
<li>Extended Spectre-BHB mitigation support to Cortex-A57.
<!-- 2024/03/14 -->
<li>Cherry-picked libexpat fix for CVE-2024-28757, billion laughs attack.
<!-- 2024/03/13 -->
<li>Exposed arm64 BTI support to userland.
<!-- 2024/03/12 -->
<li>Enforced same-origin policy for HTTP redirects in <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a>.
<!-- 2024/03/11 -->
</ul>
