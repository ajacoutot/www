<!doctype html>
<html lang=en id=plus>
<meta charset=utf-8>
<title>OpenBSD -current Changelog</title>
<meta name="description" content="OpenBSD -current changes">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/plus.html">
<style>
strong {
	color: var(--red);
	font-weight: normal;
}

h3 {
	color: var(--blue);
}
</style>

<h2 id=OpenBSD>
<a href="index.html">
<i>Open</i><b>BSD</b></a>
-current Changelog
</h2>
<hr>

<p>
This selection is intended to include all important
and all user-visible changes.
For a complete record of all changes, please see the "source-changes"
mailing list, called "OpenBSD CVS"
in the <a href="https://marc.info/?l=openbsd-cvs">archives</a>,
or use <a href="anoncvs.html#CVS">CVS</a>.

<p>
For changes in other releases, click below:<br>
<a href="plus20.html">2.0</a>,
<a href="plus21.html">2.1</a>,
<a href="plus22.html">2.2</a>,
<a href="plus23.html">2.3</a>,
<a href="plus24.html">2.4</a>,
<a href="plus25.html">2.5</a>,
<a href="plus26.html">2.6</a>,
<a href="plus27.html">2.7</a>,
<a href="plus28.html">2.8</a>,
<a href="plus29.html">2.9</a>,
<a href="plus30.html">3.0</a>,
<a href="plus31.html">3.1</a>,
<a href="plus32.html">3.2</a>,
<a href="plus33.html">3.3</a>,
<a href="plus34.html">3.4</a>,
<a href="plus35.html">3.5</a>,
<a href="plus36.html">3.6</a>,
<br>
<a href="plus37.html">3.7</a>,
<a href="plus38.html">3.8</a>,
<a href="plus39.html">3.9</a>,
<a href="plus40.html">4.0</a>,
<a href="plus41.html">4.1</a>,
<a href="plus42.html">4.2</a>,
<a href="plus43.html">4.3</a>,
<a href="plus44.html">4.4</a>,
<a href="plus45.html">4.5</a>,
<a href="plus46.html">4.6</a>,
<a href="plus47.html">4.7</a>,
<a href="plus48.html">4.8</a>,
<a href="plus49.html">4.9</a>,
<a href="plus50.html">5.0</a>,
<a href="plus51.html">5.1</a>,
<a href="plus52.html">5.2</a>,
<a href="plus53.html">5.3</a>,
<br>
<a href="plus54.html">5.4</a>,
<a href="plus55.html">5.5</a>,
<a href="plus56.html">5.6</a>,
<a href="plus57.html">5.7</a>,
<a href="plus58.html">5.8</a>,
<a href="plus59.html">5.9</a>,
<a href="plus60.html">6.0</a>,
<a href="plus61.html">6.1</a>,
<a href="plus62.html">6.2</a>,
<a href="plus63.html">6.3</a>,
<a href="plus64.html">6.4</a>,
<a href="plus65.html">6.5</a>,
<a href="plus66.html">6.6</a>,
<a href="plus67.html">6.7</a>,
<a href="plus68.html">6.8</a>,
<a href="plus69.html">6.9</a>,
<a href="plus70.html">7.0</a>,
<a href="plus71.html">7.1</a>.
<br>

<p>
<h3>Changes made between OpenBSD 7.1 and -current</h3>
<p>

<ul>
<!-- 2022/05/09 -->
<!-- 2022/05/08 -->
<!-- 2022/05/07 -->
<!-- 2022/05/06 -->
<!-- 2022/05/05 -->
<!-- 2022/05/04 -->
<!-- 2022/05/03 -->
<!-- 2022/05/02 -->
<!-- 2022/05/01 -->
<li>Prevented out-of-bounds array access with binaries that use unsupported relocations on amd64.
<!-- 2022/04/30 -->
<!-- 2022/04/29 -->
<li>Enabled running of IP input and forwarding with a shared netlock.
<li>Enabled <a href="https://man.openbsd.org/pkg_add.1">pkg_add(1)</a> caching by default.
<li>Updated libdrm to version 2.4.110.
<li>Altered <a href="https://man.openbsd.org/sndiod.8">sndiod(8)</a> to wait until the buffer is drained before closing the device.
<li>Changed <a href="https://man.openbsd.org/pf.4">pf(4)</a> handling of IGMP and ICMP6 MLD packets to allow multicast control packets to work by default.
<li>Introduced <a href="https://man.openbsd.org/sio_flush.3">sio_flush(3)</a> to stop playback immediately.
<!-- 2022/04/28 -->
<li>Fixed a potential leak of an SK device in <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>.
<li>Fixed a memory leak on the session-bind path of <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>.
<li>Protected the global lists with a mutex and moved rttimer entries into a temporary list to make route timers MP safe.
<li>Decoupled IP input and forwarding from protocol input to allow parallel IP processing while the upper layers are still not MP safe.
<!-- 2022/04/27 -->
<li>Removed the ASN.1 decoder tag/length cache (TLC) from <a href="https://man.openbsd.org/crypto.3">crypto(3)</a>.
<li>Added <a href="https://man.openbsd.org/dt.4">dt(4)</a> tracepoints for <a href="https://man.openbsd.org/vmm.4">vmm(4)</a> vm exit reporting.
<!-- 2022/04/26 -->
<li>Added cpu frequency sensors for each core on CPUs that have MPERF/APERF support.
<!-- 2022/04/25 -->
<li>Reimplemented the page allocation code using <a href="https://man.openbsd.org/bus_dma.9">bus_dma(9)</a> APIs to make sure DMA addresses are translated properly on architectures with an IOMMU. This fixed <a href="https://man.openbsd.org/amdgpu.4">amdgpu(4)</a> and <a href="https://man.openbsd.org/radeondrm.4">radeondrm(4)</a> on powerpc, sparc64, and arm64 machines.
<li>Updated libX11 to version 1.7.5.
<li>Updated <a href="https://man.openbsd.org/xterm">xterm(1)</a> to version 372.
<li>Extended <a href="https://man.openbsd.org/ksmn.4">ksmn(4)</a> to show CCD temperatures if available.
<!-- 2022/04/24 -->
<!-- 2022/04/23 -->
<li>Increased rx buffer size on <a href="https://man.openbsd.org/uaq.4">uaq(4)</a> to 62kB.
<li>Added missing uuid_dec_le() to init_fp() so <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a> -A works on big-endian architectures.
<!-- 2022/04/22 -->
<li>Updated <a href="https://man.openbsd.org/vi">vi(1)</a> to apply expandtab to the output of a ! command.
<li>Protected <a href="https://man.openbsd.org/arp.4">arp(4)</a>, ND6, and <a href="https://man.openbsd.org/pppoe.4">pppoe(4)</a> with the kernel lock so that IP forwarding can be run in parallel.
<!-- 2022/04/21 -->
<li>Updated various wireless drivers to use <a href="https://man.openbsd.org/memset.3">memset(3)</a> to initialize ieee80211_rxinfo struct properly.
<li>Prevented a crash in <a href="https://man.openbsd.org/vi">vi(1)</a> when cursor key support is disabled.
<li>Introduced dedicated link entries for snapshots to <a href="https://man.openbsd.org/pfsync.4">pfsync(4)</a>.
<!-- 2022/04/20 -->
<li>Repaired <a href="https://man.openbsd.org/rge.4">rge(4)</a> hardware vlan tagging.
<li>Changed <a href="https://man.openbsd.org/crypto.3">crypto(3)</a> to avoid expensive RFC 3779 checks during certificate verification.
<li>Updated Mesa to version 21.3.8.
<li>Added concatenated JSON output to <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a> filemode.
<!-- 2022/04/19 -->
<li>Made <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> try to continue running local I/O for channels in OPEN state during transport rekeying to allow escapes to work in the client if the connection stalls during a rekey event.
<li>Made <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a> hard error when parse_filepath() is passed an unknown repository id.
<!-- 2022/04/18 -->
<li>Restored <a href="https://man.openbsd.org/vte.4">vte(4)</a> original MDC speed control register value on vte_reset, needed for Vortex86DX3 machines.
<li>Enabled <a href="https://man.openbsd.org/kstat.4">kstat(4)</a> and <a href="https://man.openbsd.org/kstat.1">kstat(1)</a>.
<!-- 2022/04/17 -->
<li>Fixed <a href="https://man.openbsd.org/kbd.8">kbd(8)</a> so it doesn't fail silently when executed by a regular user.
<!-- 2022/04/16 -->
<li>Made device matching in <a href="https://man.openbsd.org/iwx.4">iwx(4)</a> more similar to linux iwlwifi.
<!-- 2022/04/15 -->
<li>Allowed more than one CRL URI in certificates for <a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a>
<li>Made use of the fact that repositories are unique objects in <a href="https://man.openbsd.org/pkg_add">pkg_add(1)</a> and annotated the quirks repository as cached, allowing for a large speed increase.
<!-- 2022/04/14 -->
<li>Relaxed address availability check for <a href="https://man.openbsd.org/multicast.4">multicast(4)</a> binds so processes listening for the same multicast address do not need to be the same UID.
<li>Fixed witness lock issue found where <a href="https://man.openbsd.org/pfsync.4">pfsync(4)</a> holds the mutex and an interrupt grabs the kernel lock.
<!-- 2022/04/13 -->
<li>Updated <a href="https://man.openbsd.org/afterboot.8">afterboot(8)</a> to direct the user to use binary packages.
<li>Changed to a simpler formula to calculate a default kern.maxthread value: 2*NPROCESS.
<!-- 2022/04/12 -->
<li>Simplified machine command handling in <a href="https://man.openbsd.org/ddb.4">ddb(4)</a>.
<li>Fixed <a href="https://man.openbsd.org/openrsync">openrsync(1)</a> on sparc64 by eliminating a redundant second conversion of the int value from little to host endian.
<li>Extended <a href="https://man.openbsd.org/rpki-client">rpki-client(8)</a> -f filemode to decode and print TAL details.
<!-- 2022/04/11 -->
<!-- 2022/04/10 -->
<li>Changed <a href="https://man.openbsd.org/compress">compress(1)</a> to print a more accurate message when -v is used with -k.
<li>Added missing arches (aarch64, mipsel64, powerpc64) to categories in <a href="https://man.openbsd.org/sendbug">sendbug(1)</a>.
<!-- 2022/04/09 -->
<!-- 2022/04/08 -->
<li>Fixed calculation of the width of spanned columns in <a href="https://man.openbsd.org/mandoc">mandoc(1)</a>.
<li>Fixed memory leak in <a href="https://man.openbsd.org/ipmi.4">ipmi(4)</a> get_sdr on failure.
<!-- 2022/04/07 -->
<li>Added support for more power sensors to <a href="https://man.openbsd.org/ipmi.4">ipmi(4)</a>.
<!-- 2022/04/06 -->
<li>Added support for switching from glass console to serial console on arm64 systems that default to glass console.
<li>Allowed bsd.rd and bsd/bsd.mp to boot on Oracle Cloud amd64 instances.
</ul>
